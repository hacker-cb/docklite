---
alwaysApply: true
description: DockLite project structure and architecture overview
---

# DockLite Project Overview

DockLite - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ²ĞµĞ±-ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼ Ğ´Ğ»Ñ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· docker-compose.

## Project Structure

```
/home/pavel/docklite/          # Main DockLite system
â”œâ”€â”€ backend/                   # FastAPI backend
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/              # API endpoints (auth, users, projects, presets, deployment)
â”‚   â”‚   â”œâ”€â”€ core/             # Config, database, security
â”‚   â”‚   â”œâ”€â”€ models/           # SQLAlchemy models & Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ services/         # Business logic
â”‚   â”‚   â””â”€â”€ presets/          # 14 docker-compose templates
â”‚   â”œâ”€â”€ tests/                # Pytest tests (78 tests)
â”‚   â”œâ”€â”€ alembic/              # Database migrations
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/                  # Vue.js 3 + PrimeVue frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/            # Router views (ProjectsView, UsersView)
â”‚   â”‚   â”œâ”€â”€ App.vue           # Main app with auth
â”‚   â”‚   â”œâ”€â”€ Login.vue         # Login form
â”‚   â”‚   â”œâ”€â”€ Setup.vue         # Initial setup form
â”‚   â”‚   â”œâ”€â”€ router.js         # Vue Router config
â”‚   â”‚   â””â”€â”€ api.js            # Axios API client
â”‚   â”œâ”€â”€ tests/                # Vitest tests
â”‚   â””â”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml

/home/docklite/projects/       # User deployed projects
    â”œâ”€â”€ {project_id}/
    â”‚   â”œâ”€â”€ docker-compose.yml
    â”‚   â””â”€â”€ .env
```

## Key Architecture Decisions

### Port Field Removed
- Projects do NOT have a port field
- All projects will use virtual hosts (Nginx in Phase 5)
- Access via domains, not ports

### Deployment via SSH
- User: `docklite` (configurable via DEPLOY_USER env)
- Projects dir: `/home/docklite/projects/`
- Users upload files via rsync/scp/SFTP

### Multi-User with JWT
- JWT authentication with bcrypt password hashing
- Admin users can manage other users
- Setup screen for first admin creation
- User Management UI for admins

## Tech Stack

**Backend:**
- FastAPI (async)
- SQLAlchemy + Alembic (SQLite, migrateable to PostgreSQL)
- JWT (python-jose) + bcrypt (passlib)
- PyYAML for validation
- Pytest (78 tests, 94% coverage)

**Frontend:**
- Vue.js 3 (Composition API)
- Vue Router 4 (hash mode)
- PrimeVue UI components
- Axios for API calls
- Vitest for testing

## Current Phase Status

âœ… **Phase 1**: CRUD + Presets (14) + SSH Deployment
âœ… **Phase 2**: JWT Authorization + Auto-Setup
âœ… **Phase 2.5**: User Management
ğŸ”„ **Phase 3**: Container Management (next)
ğŸ”„ **Phases 4-9**: Planned

## Important Files

- [backend/app/main.py](mdc:backend/app/main.py) - FastAPI app entry point
- [backend/app/core/config.py](mdc:backend/app/core/config.py) - Settings
- [backend/app/models/project.py](mdc:backend/app/models/project.py) - Project model
- [backend/app/models/user.py](mdc:backend/app/models/user.py) - User model
- [frontend/src/App.vue](mdc:frontend/src/App.vue) - Main Vue app
- [frontend/src/router.js](mdc:frontend/src/router.js) - Vue Router
- [docker-compose.yml](mdc:docker-compose.yml) - DockLite orchestration
- [README.md](mdc:README.md) - Main documentation

## Testing

Always run tests after changes:
```bash
sg docker -c "docker-compose run --rm backend pytest -v"
```

Expected: 78 tests passing
