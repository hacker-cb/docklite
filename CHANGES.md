# Изменения: Убрано поле Port

**Дата**: 28 октября 2025

## Что изменено

### ❌ Удалено поле Port
- Port больше не используется в настройках проекта
- Все проекты будут доступны через virtual hosts по доменам
- Стандартные порты будут использоваться внутри docker-compose

### ✅ Изменения в UI
- Убрана колонка "Port" из таблицы проектов
- Убрано поле "Port" из формы создания/редактирования
- Добавлена подсказка: "Проект будет доступен через virtual host по этому домену"

### ✅ Изменения в Backend
- Удалено поле `port` из схем API (ProjectCreate, ProjectUpdate)
- Удалена проверка конфликтов портов
- Поле `port` в БД остается (NULL) для совместимости, но не используется

### ✅ Изменения в Пресетах
- Удалено поле `default_port` из всех 14 пресетов
- Пресеты теперь не предзаполняют порт

## Для чего это сделано

Virtual hosts позволят:
- Доступ к проектам по понятным доменам (example.com)
- Не думать о конфликтах портов
- Использовать стандартные порты (80/443) через Nginx reverse proxy

## Как это будет работать (Фаза 5)

```
Пользователь → Nginx (:80/:443) → Virtual Host → Docker Container
                    ↓
            blog.example.com → WordPress контейнер
            api.example.com  → FastAPI контейнер
            shop.example.com → Node.js контейнер
```

## Запуск изменений

Выполните на сервере:

```bash
cd /home/pavel/docklite

# Если Docker еще не установлен
curl -fsSL https://get.docker.com | sudo sh
sudo usermod -aG docker $USER
newgrp docker

# Пересобрать и запустить
./rebuild.sh
```

Или вручную:

```bash
cd /home/pavel/docklite
docker-compose down
docker-compose up -d --build
```

## Проверка

После перезапуска:
1. Откройте http://artem.sokolov.me:5173
2. Нажмите "New Project"
3. Убедитесь что поля "Port" больше нет
4. Создайте проект - только Name и Domain

## Совместимость

- Старые проекты с указанным портом продолжат работать
- Поле `port` в БД сохранено (но не используется)
- Никаких миграций БД не требуется

## Следующие шаги

После этого изменения можно переходить к:
- **Фаза 5**: Nginx и Virtual Hosts - настоящая маршрутизация по доменам
- **Фаза 6**: SSL/HTTPS - автоматические сертификаты для доменов

